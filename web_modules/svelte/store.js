import{n as b,s as p}from"../common/index-9ef63cc3.js";const i=[];function g(s,c){return{subscribe:d(s,c).subscribe}}function d(s,c=b){let r;const t=[];function u(e){if(p(s,e)&&(s=e,r)){const f=!i.length;for(let n=0;n<t.length;n+=1){const o=t[n];o[1](),i.push(o,s)}if(f){for(let n=0;n<i.length;n+=2)i[n][0](i[n+1]);i.length=0}}}function l(e){u(e(s))}function h(e,f=b){const n=[e,f];return t.push(n),t.length===1&&(r=c(u)||b),e(s),()=>{const o=t.indexOf(n);o!==-1&&t.splice(o,1),t.length===0&&(r(),r=null)}}return{set:u,update:l,subscribe:h}}export{g as readable};
